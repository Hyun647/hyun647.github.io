---
categories: coding
tag: [Node.js, WebSocket, Docker, API, Front-end, Web Development, JavaScript]
---

# UnoweAsk

![UnoweAsk](https://github.com/Hyun647/hyun647.github.io/blob/master/images/UnoweAsk_img1.png?raw=true)

**UnoweAsk**는 실시간 질문과 답변을 제공하는 온라인 플랫폼입니다. 이 프로젝트는 Node.js와 WebSocket을 활용하여 클라이언트 간의 실시간 데이터 동기화를 구현하였으며, Docker를 사용하여 개발 및 배포 환경을 관리합니다.

## 주요 기능

- **실시간 질문과 답변**: 질문에 대한 답변이 실시간으로 반영됩니다.
- **질문 삭제 기능**: 사용자가 질문을 삭제하면 즉시 반영됩니다.
- **이중 페이지**: 질문 페이지와 답변 페이지를 동시에 열어볼 수 있습니다.

## 기술 스택

- **백엔드**: Node.js, Express
- **프론트엔드**: HTML, CSS, JavaScript
- **실시간 통신**: WebSocket
- **Docker**: 개발 및 배포 환경 설정

## 서버측 코드

```javascript
const express = require('express');
const http = require('http');
const WebSocket = require('ws');
const path = require('path');

const app = express();
const server = http.createServer(app);
const wss = new WebSocket.Server({ server });

// 질문과 답변을 저장할 변수
let questions = [];
let answers = [];

// 정적 파일 제공 (HTML, CSS, JS)
app.use(express.static(path.join(__dirname, 'public')));

// WebSocket 연결 처리
wss.on('connection', (ws) => {
    console.log('새 클라이언트가 연결되었습니다.');

    // 클라이언트에게 저장된 질문과 답변 전달
    ws.send(JSON.stringify({ questions, answers }));

    // 클라이언트로부터 메시지를 받았을 때 처리
    ws.on('message', (message) => {
        const { type, data } = JSON.parse(message);

        if (type === 'question') {
            questions.push(data);
        } else if (type === 'answer') {
            answers.push(data);
        } else if (type === 'delete') {
            questions = questions.filter(q => q.id !== data.id);
        }

        // 모든 클라이언트에게 업데이트된 질문과 답변 전송
        wss.clients.forEach(client => {
            if (client.readyState === WebSocket.OPEN) {
                client.send(JSON.stringify({ questions, answers }));
            }
        });
    });

    ws.on('close', () => {
        console.log('클라이언트 연결이 종료되었습니다.');
    });
});

// 서버 실행
server.listen(3002, () => {
    console.log('서버가 http://localhost:3002 에서 실행 중입니다.');
});
```

### 코드 설명

1. **필요한 모듈 로드**: `express`, `http`, `ws`, `path` 모듈을 로드합니다.
2. **서버 및 WebSocket 설정**:
   - `express`를 사용해 HTTP 서버를 설정하고,
   - `ws`를 사용해 WebSocket 서버를 구성합니다.
3. **질문과 답변 저장 변수**: `questions`와 `answers` 배열에 현재 질문과 답변을 저장합니다.
4. **정적 파일 제공**: `public` 디렉토리의 정적 파일을 서빙합니다.
5. **WebSocket 연결 처리**:
   - 클라이언트가 연결되면 저장된 질문과 답변을 전송합니다.
   - 클라이언트가 메시지를 전송하면 질문이나 답변을 업데이트하고, 모든 클라이언트에게 전송합니다.
6. **서버 실행**: 포트 `3002`에서 서버를 실행합니다.

## 클라이언트측 HTML

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UnoweAsk</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>UnoweAsk</h1>

    <div id="container">
        <div id="question-container">
            <textarea id="question" placeholder="질문을 작성하세요..."></textarea>
            <button id="submit-question">질문 제출</button>
        </div>
        <div id="answer-container">
            <textarea id="answer" placeholder="답변을 작성하세요..."></textarea>
            <button id="submit-answer">답변 제출</button>
        </div>
        <div id="content-container"></div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
```

### 코드 설명

1. **헤더**: HTML 문서의 메타데이터와 스타일 시트를 포함합니다.
2. **본문**:
   - 질문과 답변을 작성할 `textarea`와 제출 버튼이 포함되어 있습니다.
   - 작성된 질문과 답변이 표시될 `div` 요소가 있습니다.
3. **스크립트**: 클라이언트측 JavaScript를 포함합니다.

## 클라이언트측 CSS

```css
body {
    font-family: 'Arial', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    background-color: #f0f0f0; /* 밝은 배경 */
    color: #333; /* 일반 텍스트 색상 */
    padding: 0;
    box-sizing: border-box;
}

/* 추가적인 CSS 스타일링 코드... */

textarea {
    width: 100%;
    height: 100px;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

button {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    background-color: #007bff;
    color: white;
    cursor: pointer;
    font-size: 16px;
}

button:hover {
    background-color: #0056b3;
}
```

### 코드 설명

1. **기본 스타일**:
   - 밝은 배경과 일반 텍스트 색상 적용.
   - Flexbox를 사용하여 중앙 정렬.
2. **입력창과 버튼**:
   - `textarea`와 `button`의 스타일링.

## 클라이언트측 JavaScript

```javascript
const socket = new WebSocket('ws://localhost:3002');

const submitQuestionButton = document.getElementById('submit-question');
const submitAnswerButton = document.getElementById('submit-answer');
const questionTextarea = document.getElementById('question');
const answerTextarea = document.getElementById('answer');
const contentContainer = document.getElementById('content-container');

// 질문 제출
submitQuestionButton.addEventListener('click', () => {
    const question = questionTextarea.value;
    if (question) {
        socket.send(JSON.stringify({ type: 'question', data: { id: Date.now(), text: question } }));
        questionTextarea.value = '';
    }
});

// 답변 제출
submitAnswerButton.addEventListener('click', () => {
    const answer = answerTextarea.value;
    if (answer) {
        socket.send(JSON.stringify({ type: 'answer', data: { id: Date.now(), text: answer } }));
        answerTextarea.value = '';
    }
});

// 서버에서 받은 질문과 답변을 표시
socket.onmessage = (event) => {
    const { questions, answers } = JSON.parse(event.data);
    renderContent(questions, answers);
};

// 질문과 답변을 HTML로 변환 후 콘텐츠에 표시
const renderContent = (questions, answers) => {
    contentContainer.innerHTML = `
        <h2>질문</h2>
        ${questions.map(q => `<div><p>${q.text}</p></div>`).join('')}
        <h2>답변</h2>
        ${answers.map(a => `<div><p>${a.text}</p></div>`).join('')}
    `;
};
```

### 코드 설명

1. **WebSocket 연결**: 서버에 WebSocket 연결을 설정합니다.
2. **질문과 답변 제출**:
   - 질문과 답변을 작성한 후 버튼 클릭 시 서버로 전송합니다.
3. **서버 메시지 처리**:
   - 서버에서 받은 질문과 답변을 `contentContainer`에 반영합니다.
4. **질문과 답변 렌더링**:
   - HTML로 변환하여 표시합니다.

## 화면 미리보기

### 질문과 답변 페이지

![질문과 답변 페이지](https://github.com/Hyun647/hyun647.github.io/blob/master/images/UnoweAsk_img1.png?raw=true)

질문 페이지와 답변 페이지를 동시에 띄운 모습입니다.

### 질문에 답변 작성 중

![답변 작성 중](https://github.com/Hyun647/hyun647.github.io/blob/master/images/UnoweAsk_img2.png?raw=true)

질문에 답변을 작성하는 장면입니다.

### 답변이 달린 후

![답변 달린 후](https://github.com/Hyun647/hyun647.github.io/blob/master/images/UnoweAsk_img3.png?raw=true)

답변이 달리고 난 후의 모습입니다.

### 질문 삭제 중

![질문 삭제 중](https://github.com/Hyun647/hyun647.github.io/blob/master/images/UnoweAsk_img4.png?raw=true)

질문을 삭제하는 장면입니다.

### 삭제한 질문이 사라진 후

![삭제한 질문 사라진 후](https://github.com/Hyun647/hyun647.github.io/blob/master/images/UnoweAsk_img5.png?raw=true)

삭제한 질문이 사라진 후의 모습입니다.

## 기여 방법

1. 리포지토리를 [포크](https://docs.github.com/en/get-started/quickstart/fork-a-repo)합니다.
2. 변경 사항을 추가하고, 커밋합니다.
3. [풀 리퀘스트](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests) 생성하여 기여합니다.

---

**UnoweAsk**는 실시간 질문과 답변 시스템의 좋은 예시로, 최신 웹 기술을 활용하여 실용적인 애플리케이션을 구현한 프로젝트입니다. 더 많은 정보를 원하시면 [GitHub 리포지토리](https://github.com/Hyun647/UnoweAsk)를 방문해 주세요.
